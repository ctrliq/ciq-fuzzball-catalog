echo "\x2320436f707972696768742032303235204349512c20496e632e20416c6c207269676874732072657365727665642e0a0a7b7b2d20246275696c644e756d626572203a3d202e5374617263636d4275696c644e756d626572207d7d0a7b7b2d206966206571202e5374617263636d507265636973696f6e2022646f75626c6522207d7d0a20207b7b2d20246275696c644e756d626572203d207072696e7466202225732d523822202e5374617263636d4275696c644e756d626572207d7d0a7b7b2d20656e64207d7d0a0a76657273696f6e3a2076310a766f6c756d65733a0a2020646174613a0a202020207265666572656e63653a207b7b2e566f6c756d657d7d0a6a6f62733a0a20207374617263636d2d61636f75737469632d776176652d73696d756c6174696f6e3a0a202020206377643a202f646174610a20202020656e763a0a2020202020202d2043444c4d445f4c4943454e53455f46494c453d7b7b2e43646c6d644c6963656e736546696c657d7d0a2020202020202d205354415243434d5f504f445f4b45593d7b7b2e5374617263636d506f644b65797d7d0a20202020696d6167653a0a2020202020207572693a203e2d0a20202020202020207b7b2e5374617263636d4465736b746f70436f6e7461696e65725552497d7d3a7b7b2e5374617263636d56657273696f6e7d7d2d7b7b2e5374617263636d507265636973696f6e7d7d0a2020202020207365637265743a207b7b2e5374617263636d4465736b746f70436f6e7461696e65724f63695365637265747d7d0a202020206d6f756e74733a0a202020202020646174613a0a20202020202020206c6f636174696f6e3a202f646174610a20202020706f6c6963793a0a20202020202074696d656f75743a0a2020202020202020657865637574653a2033306d30730a20202020636f6d6d616e643a0a2020202020202d202f62696e2f73680a2020202020202d20272d63270a2020202020202d207c0a20202020202020206578706f727420504154483d2f6f70742f5369656d656e732f7b7b20246275696c644e756d626572207d7d2f535441522d43434d2b7b7b20246275696c644e756d626572207d7d2f737461722f62696e3a24504154483b0a0a20202020202020206563686f0a20202020202020206563686f2022416363657373696e6720746865207669727475616c206465736b746f7020726571756972657320706f72742d666f7277617264696e67207669612074686520434c493a220a20202020202020206563686f0a20202020202020206563686f2022232066757a7a62616c6c20776f726b666c6f7720706f72742d666f727761726420247b46425f574f524b464c4f575f49447d20786663653420363038303a36303830220a20202020202020206563686f0a20202020202020206563686f205468656e206e6176696761746520746f20687474703a2f2f6c6f63616c686f73743a363038300a20202020202020206563686f0a20202020202020202f7573722f6c6f63616c2f62696e2f73746172742d766e637365727665722e73680a202020207265736f757263653a0a2020202020206370753a0a2020202020202020636f7265733a207b7b2e5374617263636d4465736b746f70436f7265737d7d0a2020202020202020616666696e6974793a204e554d410a2020202020206d656d6f72793a0a202020202020202073697a653a207b7b2e5374617263636d4465736b746f704d656d6f72797d7d0a" | xxd -r -p

 Copyright 2025 CIQ, Inc. All rights reserved.

{{- $buildNumber := .StarccmBuildNumber }}
{{- if eq .StarccmPrecision "double" }}
  {{- $buildNumber = printf "%s-R8" .StarccmBuildNumber }}
{{- end }}

version: v1
volumes:
  data:
    reference: {{.Volume}}
jobs:
  starccm-acoustic-wave-simulation:
    cwd: /data
    env:
      - CDLMD_LICENSE_FILE={{.CdlmdLicenseFile}}
      - STARCCM_POD_KEY={{.StarccmPodKey}}
    image:
      uri: >-
        {{.StarccmDesktopContainerURI}}:{{.StarccmVersion}}-{{.StarccmPrecision}}
      secret: {{.StarccmDesktopContainerOciSecret}}
    mounts:
      data:
        location: /data
    policy:
      timeout:
        execute: 30m0s
    command:
      - /bin/sh
      - '-c'
      - |
        export PATH=/opt/Siemens/{{ $buildNumber }}/STAR-CCM+{{ $buildNumber }}/star/bin:$PATH;

        echo
        echo "Accessing the virtual desktop requires port-forwarding via the CLI:"
        echo
        echo "# fuzzball workflow port-forward ${FB_WORKFLOW_ID} xfce4 6080:6080"
        echo
        echo Then navigate to http://localhost:6080
        echo
        /usr/local/bin/start-vncserver.sh
    resource:
      cpu:
        cores: {{.StarccmDesktopCores}}
        affinity: NUMA
      memory:
        size: {{.StarccmDesktopMemory}}