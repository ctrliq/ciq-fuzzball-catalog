echo "\x2320436f707972696768742032303235204349512c20496e632e20416c6c207269676874732072657365727665642e0a7b7b2d2024766572203a3d202e416e73797356657273696f6e207d7d0a7b7b2d2024616e7379735f76657273696f6e5f6e756d626572203a3d207072696e74662022762573257322202873756273747220322034202476657229202873756273747220352036202476657229207d7d0a76657273696f6e3a2076310a6a6f62733a0a202078666365343a0a20202020656e763a0a2020202020202d20484f4d453d2f746d702f686f6d650a2020202020202d20414e5359534c4d445f4c4943454e53455f46494c453d7b7b2e416e7379736c6d644c6963656e736546696c657d7d0a20202020696d6167653a0a2020202020207572693a207b7b2e416e7379734d656368616e6963616c4465736b746f70436f6e7461696e65725552497d7d0a2020202020207365637265743a207b7b2e416e7379734d656368616e6963616c4465736b746f70436f6e7461696e65724f63695365637265747d7d0a202020206d6f756e74733a0a202020202020646174613a0a20202020202020206c6f636174696f6e3a202f646174610a20202020706f6c6963793a0a20202020202074696d656f75743a0a2020202020202020657865637574653a207b7b2e54696d656f75747d7d0a20202020636f6d6d616e643a0a2020202020202d202f62696e2f73680a2020202020202d20272d63270a2020202020202d207c0a20202020202020206578706f727420504154483d7b7b2e416e737973496e7374616c6c4469727d7d2f7b7b24616e7379735f76657273696f6e5f6e756d6265727d7d2f4672616d65776f726b2f62696e2f4c696e757836343a24504154480a0a20202020202020206563686f0a20202020202020206563686f2022416363657373696e6720746865207669727475616c206465736b746f7020726571756972657320706f72742d666f7277617264696e67207669612074686520434c493a220a20202020202020206563686f0a20202020202020206563686f2022232066757a7a62616c6c20776f726b666c6f7720706f72742d666f727761726420247b46425f574f524b464c4f575f49447d20786663653420363038303a36303830220a20202020202020206563686f0a20202020202020206563686f205468656e206e6176696761746520746f20687474703a2f2f6c6f63616c686f73743a363038300a20202020202020206563686f0a20202020202020200a20202020202020202f7573722f6c6f63616c2f62696e2f73746172742d766e637365727665722e73680a202020207265736f757263653a0a2020202020206370753a0a2020202020202020636f7265733a207b7b2e4d656368616e6963616c4465736b746f70436f7265737d7d0a2020202020202020616666696e6974793a204e554d410a2020202020206d656d6f72793a0a202020202020202073697a653a207b7b2e4d656368616e6963616c4465736b746f704d656d6f72797d7d0a766f6c756d65733a0a2020646174613a0a202020207265666572656e63653a207b7b2e566f6c756d657d7d0a" | xxd -r -p

Copyright 2025 CIQ, Inc. All rights reserved.
{{- $ver := .AnsysVersion }}
{{- $ansys_version_number := printf "v%s%s" (substr 2 4 $ver) (substr 5 6 $ver) }}
version: v1
jobs:
  xfce4:
    env:
      - HOME=/tmp/home
      - ANSYSLMD_LICENSE_FILE={{.AnsyslmdLicenseFile}}
    image:
      uri: {{.AnsysMechanicalDesktopContainerURI}}
      secret: {{.AnsysMechanicalDesktopContainerOciSecret}}
    mounts:
      data:
        location: /data
    policy:
      timeout:
        execute: {{.Timeout}}
    command:
      - /bin/sh
      - '-c'
      - |
        export PATH={{.AnsysInstallDir}}/{{$ansys_version_number}}/Framework/bin/Linux64:$PATH

        echo
        echo "Accessing the virtual desktop requires port-forwarding via the CLI:"
        echo
        echo "# fuzzball workflow port-forward ${FB_WORKFLOW_ID} xfce4 6080:6080"
        echo
        echo Then navigate to http://localhost:6080
        echo
        
        /usr/local/bin/start-vncserver.sh
    resource:
      cpu:
        cores: {{.MechanicalDesktopCores}}
        affinity: NUMA
      memory:
        size: {{.MechanicalDesktopMemory}}
volumes:
  data:
    reference: {{.Volume}}